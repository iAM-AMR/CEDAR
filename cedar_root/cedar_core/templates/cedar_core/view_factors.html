

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>View Factors</title>

    {% load static %}
    {% load crispy_forms_tags %}

    <!-- MDB icon -->
    <link rel="icon" href="{% static 'img/mdb-favicon.ico' %}" type="image/x-icon">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.2/css/all.css">
    <!-- Google Fonts Roboto -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap">
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <!-- Material Design Bootstrap -->
    <link rel="stylesheet" href="{% static 'css/mdb.min.css' %}">
    <!-- Your custom styles (optional) -->
    <!-- <link rel="stylesheet" href="{% static 'cedar_core/style.css' %}"> -->
    <link rel="stylesheet" href="{% static 'cedar_core/view_fac_style.css' %}">
    <link rel="stylesheet" href="{% static 'cedar_core/bootstrap_table_sort.css' %}">
    <!-- MDBootstrap Datatables  -->
    <link href="{% static 'css/addons/datatables.min.css' %}" rel="stylesheet">
  </head>
  <body>

    <!-- <div class="table-wrapper-scroll-y my-custom-scrollbar"> -->
    <div class="container-lg">
      <h1 class="mt-2">{{ref.key_bibtex}}</h1>
      <hr style="border-width:5px;">

      <br>

      <!-- Display factor data detail, if a factor has been selected -->
      {% if exp_form %}
        <div class="container-sm">
          <form action="" method="post" id="expform" enctype="multipart/form-data" role="form">
            {% csrf_token %}
            {% crispy exp_form %}
          </form>
        </div>
      {% else %}
        <table id="facTable" class="table table-sm" cellspacing="0" width="100%">
          <thead>
            <tr>
              <th style="border: none;"></th>
            </tr>
          </thead>
          <tbody>
            <td style="text-align: center; height: 50px; border: none;">
              <h4>Click on a factor's title to view or edit its core data here</h4>
            </td>
            <td>
              <!-- <table id="facData" class="table table-bordered table-sm" cellspacing="0" width="100%">
                <thead>
                  <tr>
                    <th>Group</th>
                    <th>AMR+</th>
                    <th>AMR-</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Exposed</td>
                    <td>A</td>
                    <td>B</td>
                    <td>nexp</td>
                  </tr>
                  <tr>
                    <td>Referent</td>
                    <td>C</td>
                    <td>D</td>
                    <td>nref</td>
                  </tr>
                </tbody>
              </table> -->
            </td>
          </tbody>
        </table>
      {% endif %}

      <!-- Actual factor table -->
      <h2 class="mt-2">All Factors</h2>
      <table id="factorTable" class="table table-bordered table-sm" cellspacing="0" width="100%">
        <thead>
          <tr>
            <th>Title</th>
            <th>Description</th>
            <th>Host</th>
            <th>Microbe</th>
            <th>AMR</th>
            <th>Result Format</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for factor in ref_factors %}
          <!-- <div v-for="factor in factors"></div> -->
            <tr>
              <td>
                <a href="{% url 'expand_factor' ref_id=ref.id fac_id=factor.id %}" id="expFac">{{ factor.factor_title }}</a>
              </td>
              <td>{{ factor.factor_description }}</td>
              <td>{{ factor.host_01_id }}</td>
              <td>{{ factor.microbe_01_id }}</td>
              <td>{{ factor.resistance_id }}</td>
              <td>{{ factor.moa_type_id }}</td>
              <!-- <td>
                  <table>
                      <tr>
                          <td>{{ factor.moa_type }}</td>
                          <td>AMR+</td>
                          <td>AMR-</td>
                      </tr>
                      <tr>
                          <td>Exposed</td>
                          <td>{{ factor.contable_a }}</td>
                          <td>{{ factor.contable_b }}</td>
                      </tr>
                      <tr>
                          <td>Referent</td>
                      </tr>
                  </table>
              </td> -->
              <td style='white-space: nowrap'>
                <!-- <div class="container"> -->
                  <a title="Edit All Factor Data" href="/cedar_core/references/{{ ref.id }}/factors/{{ factor.id }}/edit" class="btn btn-info btn-xs" role="button">
                    <i class="fas fa-pencil-alt"></i>
                  </a>
                  <a title="Delete" href="/cedar_core/references/{{ ref.id }}/factors/{{ factor.id }}/delete" class="btn btn-danger btn-xs" role="button">
                    <i class="far fa-trash-alt"></i>
                <!-- </div> -->
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <!-- </div> -->

    <!-- <style>
      table a:hover { /*code works here but not in css file*/
        color: blue;
        text-decoration: underline;
      }
    </style> -->

    <style>
      .dataTable > thead > tr > th[class*="sort"]:before,
      .dataTable > thead > tr > th[class*="sort"]:after {
        content: "" !important;
      }
    </style>

    <!-- SCRIPTS -->
    <!-- jQuery -->
    <script type="text/javascript" src="{% static 'js/jquery.min.js' %}"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="{% static 'js/popper.min.js' %}"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="{% static 'js/mdb.min.js' %}"></script>
    <!-- MDBootstrap Datatables  -->
    <script type="text/javascript" src="{% static 'js/addons/datatables.min.js' %}"></script>
    <!-- Vue -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script> -->
    <!-- Your custom scripts (optional) -->

    <!-- <script type='text/javascript'>
      var factors = {{ rfs_json|safe }};
    </script> -->

    <!-- Table scrolling -->
    <script>
      $(document).ready(function () {
        $('#factorTable').DataTable({
          "scrollY": "200px",
          "scrollCollapse": true,
        });
        $('.dataTables_length').addClass('bs-select');
      });
    </script>

    <script>
      $(document).ready(function () {
        $('#facTable').DataTable({
          "paging": false,
          "searching": false,
          "info": false,
        });
      });
    </script>

    <script>
      $(document).ready(function () {
        $('#facData').DataTable({
          "paging": false,
          "searching": false,
          "info": false,
        });
      });
    </script>

    <!-- <script>
      var app = new Vue({
        delimiters: ['[[', ']]'],
        el: '#app',
        data: {
            factors: factors,
        },
        methods: {
            name_cb: function(name) {
                console.log('factorTableCheck' + name + '!')
            }
        }
      });
    </script> -->

  </body>
</html>